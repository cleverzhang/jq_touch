(function(b){var c=function(d){var f="touchstart touchmove touchend".split(" ");d=d.originalEvent||d;if(b.inArray(d.type,f)){return{x:d.targetTouches[0].pageX,y:d.targetTouches[0].pageY}}else{return{x:d.pageX,y:d.pageY}}};var a=function(g,k){var j=b("<span>").html(b("#"+g).html());var e=j.html();var i;if(b.isPlainObject(k)){for(var f in k){if(b.isArray(k[f])){var d="";var h=b("#"+f,j);if(h.length){k[f].forEach(function(m){var o=h.html();for(var l in m){var n=new RegExp("{#\\s*"+f+"\\s*\\[\\s*"+l+"\\s*\\]\\s*#}","igm");o=o.replace(n,m[l])}d+=o})}i=new RegExp("<foreach\\s+id=['\\\"]"+f+"['\\\"]>[\\s\\S]*?<\\/foreach>","igm");e=e.replace(i,d)}else{i=new RegExp("{#\\s*"+f+"\\s*#}","igm");e=e.replace(i,k[f])}}}i=new RegExp("<foreach[\\s\\S]+?foreach>","img");e=e.replace(i,"");i=new RegExp("{#\\s*.+\\s*#}","img");e=e.replace(i,"");i=new RegExp("t_src","img");e=e.replace(i,"src");return e};b.extend({"touchPosition":c,"templateRender":a})})($);