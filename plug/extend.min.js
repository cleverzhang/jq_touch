(function(b){var c=function(d){var f="touchstart touchmove touchend".split(" ");d=d.originalEvent||d;if(b.inArray(d.type,f)){return{x:d.targetTouches[0].pageX,y:d.targetTouches[0].pageY}}else{return{x:d.pageX,y:d.pageY}}};var a=function(h,k){var j=b(b("#"+h).html());var l=j.html();var g;if(b.isPlainObject(k)){for(var f in k){if(b.isArray(k[f])){var i="";var d=b("#"+f,j);var e=d.html();k[f].forEach(function(n){for(var m in n){var o=new RegExp("{#\\s*"+f+"\\s*\\[\\s*"+m+"\\s*\\]\\s*#}");e=e.replace(o,n[m])}i+=e});g=new RegExp("<foreach\\s+id=['\\\"]"+f+"['\\\"]>[\\s\\S]+?<\\/foreach>","igm");l=l.replace(g,i)}else{g=new RegExp("{#\\s*"+f+"\\s*#}");l=l.replace(g,k[f])}}}g=new RegExp("<foreach[\\s\\S]+?foreach>","img");l=l.replace(g,"");g=new RegExp("{#\\s*.+\\s*#}","img");l=l.replace(g,"");return l};b.extend({"touchPosition":c,"templateRender":a})})($);