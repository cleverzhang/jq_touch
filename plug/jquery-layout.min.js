(function(c){var f;var l;var r;var b=false;var h="<div class='_layout_mask'></div>";var e="<div class='_layout_dialog'></div>";var d="<div class='_layout_actions '></div>";var q,j,p;var i,m;var k;var a=c.fn.tap?"tap":"click";var g=function(){if(b){return}c("head").append("<style>._layout_mask{z-index: 100000;position: fixed;background: #000;opacity: 0;transition:opacity 500ms;-moz-transition:opacity 500ms;-webkit-transition:opacity 500ms;-o-transition:opacity 500ms;display: none;}._layout_dialog{z-index: 100001;position: fixed;opacity: 0;transition:opacity 500ms;-moz-transition:opacity 500ms;-webkit-transition:opacity 500ms;-o-transition:opacity 500ms;display: none;}._layout_actions{z-index: 100002;background-color: #FFF;width: 100%;text-align: center;position: fixed;display: none;}</style>");c("body").append(h);c("body").append(e);c("body").append(d);b=true;q=c("._layout_mask");j=c("._layout_dialog");p=c("._layout_actions");c(window).resize(s);c(window).resize(n)};var s=function(){var t=c(window);q.css({"height":t.height(),"width":t.width(),"top":0,"left":0,"right":0,"bottom":0})};var n=function(){var y=c(window);var u=y.width();var x=y.height();var t=j.width();var v=j.height();j.css({"top":(x-v)/2,"left":(u-t)/2})};var o=function(){};o.prototype.hiddenMask=function(){clearTimeout(f);q.css("opacity",0);f=setTimeout(function(){q.css("display","none")},600)};o.prototype.hiddenDialog=function(){clearTimeout(l);j.css("opacity",0);l=setTimeout(function(){j.html("");j.css("display","none")},600)};o.prototype.hidden=function(){this.hiddenMask();this.hiddenDialog();this.hiddenActions()};o.prototype.showMask=function(){g();clearTimeout(f);s();q.css("display","block");setTimeout(function(){q.css("opacity",0.3)},15)};o.prototype.showDialog=function(u,t){clearTimeout(l);clearTimeout(r);var v=this;g();t=c.extend({"ok":function(){return true},"cancel":function(){return true},"auto_hidden":false},t);j.html("");u=c(u);c("._layout_tap_ok",u)[a](function(){t.ok()&&v.hidden()});c("._layout_tap_cancel",u)[a](function(){t.cancel()&&v.hidden()});j.append(u);n();j.css("display","block");setTimeout(function(){j.css("opacity",1)},15);if(t["auto_hidden"]){var v=this;r=setTimeout(function(){v.hidden()},500)}};o.prototype.show=function(u,t){this.showMask();this.showDialog(u,t)};o.prototype.showActions=function(t,u){u=u||"bottom";t=c(t);g();this.showMask();var v=this;c("._layout_actions_cancel",t)[a](function(){v.hiddenActions()});p.append(t);p.css("display","block");p.css(u,0-p.height());setTimeout(function(){p.css("transition",u+" 200ms");p.css(u,0)},20)};o.prototype.hiddenActions=function(t){t=t||"bottom";this.hiddenMask();p.css(t,0-p.height());setTimeout(function(){p.empty();p.css({"transition":"","display":"none"})},200)};o.prototype.showTopAction=function(t){this.showActions(t,"top")};o.prototype.hiddenTopAction=function(){this.hiddenActions("top")};k=new o();c.extend({"dialog":k})})($);