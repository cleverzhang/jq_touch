(function(f){var c;var e;var n;var h=false;var a="<div class='_layout_mask'></div>";var m="<div class='_layout_dialog'></div>";var p,g;var o,b;var l;var k=function(){if(h){return}f("head").append("<style>._layout_mask{z-index: 10000;position: fixed;background: #000;opacity: 0;transition:opacity 500ms;-moz-transition:opacity 500ms;-webkit-transition:opacity 500ms;-o-transition:opacity 500ms;display: none;}._layout_dialog{z-index: 10001;position: fixed;opacity: 0;transition:opacity 500ms;-moz-transition:opacity 500ms;-webkit-transition:opacity 500ms;-o-transition:opacity 500ms;display: none;}</style>");f("body").append(a);f("body").append(m);h=true;p=f("._layout_mask");g=f("._layout_dialog");f(window).resize(j);f(window).resize(d)};var j=function(){var q=f(window);p.css({"height":q.height(),"width":q.width(),"top":0,"left":0,"right":0,"bottom":0})};var d=function(){var u=f(window);var r=u.width();var t=u.height();var q=g.width();var s=g.height();g.css({"top":(t-s)/2,"left":(r-q)/2})};var i=function(){};i.prototype.hiddenMask=function(){clearTimeout(c);p.css("opacity",0);c=setTimeout(function(){p.css("display","none")},600)};i.prototype.hiddenDialog=function(){clearTimeout(e);g.css("opacity",0);e=setTimeout(function(){g.css("display","none")},600)};i.prototype.hidden=function(){this.hiddenMask();this.hiddenDialog()};i.prototype.showMask=function(){k();clearTimeout(c);j();p.css("display","block");setTimeout(function(){p.css("opacity",0.3)},15)};i.prototype.showDialog=function(r,q){clearTimeout(e);clearTimeout(n);var t=this;var s="click";k();q=f.extend({"ok":function(){},"cancel":function(){},"auto_hidden":false},q);g.html("");r=f(r);if(f.fn.tap){s="tap"}f("._layout_tap_ok",r)[s](function(){q.ok();t.hidden()});f("._layout_tap_cancel",r)[s](function(){q.cancel();t.hidden()});g.append(r);d();g.css("display","block");setTimeout(function(){g.css("opacity",1)},15);if(q["auto_hidden"]){var t=this;n=setTimeout(function(){t.hidden()},1700)}};i.prototype.show=function(r,q){this.showMask();this.showDialog(r,q)};l=new i();f.extend({"dialog":l})})($);